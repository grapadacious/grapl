#!/usr/bin/env bash

ROOT_DIR="$(dirname "$(dirname "$(realpath $0)")")"

if [ -f $ROOT_DIR/.env ]; then
  set -a && source $ROOT_DIR/.env && set +a
fi

if [[ "$1" =~ ^(js|python|ruby|ts|web)$ ]]; then
    source $ROOT_DIR/.docker/$1/bin/bootstrap
    docker compose -f $ROOT_DIR/.docker/$1/docker-compose.yml run --rm --service-ports app
elif [ "$1" == "" ]; then
    echo "You must specify a runtime." >&2
    exit 1
else
    echo "Argument \"$1\" is not supported." >&2
    exit 1
fi
